# 前端工程开发需求说明

## 项目概述

基于分布式任务调度系统管理后台设计，需要开发一个现代化的Web前端应用，提供直观的系统监控和管理界面。

## 技术栈要求

### 核心框架
- **React 18+** 或 **Vue 3+** 或 **Angular 15+**（推荐React）
- **TypeScript** 支持
- **现代构建工具**: Vite 或 Webpack 5

### UI框架
- **Ant Design** 或 **Element Plus** 或 **Material-UI**
- **响应式设计**: 支持桌面和移动设备
- **主题定制**: 支持深色/浅色主题切换

### 状态管理
- **Redux Toolkit** (React) 或 **Pinia** (Vue) 或 **NgRx** (Angular)
- **数据缓存**: React Query 或 SWR

### 图表库
- **ECharts** 或 **Chart.js** 或 **D3.js**
- **实时图表**: 支持数据动态更新

### 网络请求
- **Axios** 或 **Fetch API**
- **请求拦截器**: 统一处理认证和错误
- **重试机制**: 网络异常自动重试

## 功能模块详细需求

### 1. 系统概览仪表板

#### 1.1 关键指标卡片
- **活跃GPU数量**: 实时显示当前活跃的GPU节点数
- **总任务数**: 显示系统总任务数量
- **队列长度**: 显示当前任务队列长度
- **失败任务数**: 显示失败任务数量
- **设计要求**: 卡片式布局，渐变背景，数字突出显示

#### 1.2 实时图表
- **任务执行趋势图**: 折线图显示任务完成和失败趋势
- **GPU状态分布图**: 饼图显示GPU状态分布
- **系统负载图**: 显示CPU、内存、磁盘使用率
- **设计要求**: 支持时间范围选择，图表交互，数据钻取

#### 1.3 最近告警
- **告警列表**: 显示最近的系统告警
- **告警级别**: 不同颜色标识（严重、警告、信息）
- **告警操作**: 支持确认、忽略等操作
- **设计要求**: 实时更新，支持筛选和搜索

### 2. GPU管理模块

#### 2.1 GPU节点列表
- **列表展示**: 表格形式展示所有GPU节点
- **状态标识**: 不同颜色标识GPU状态（活跃、离线、故障）
- **详细信息**: GPU ID、主机名、IP地址、端口、支持任务类型等
- **实时更新**: 心跳时间、当前任务数等实时信息
- **设计要求**: 支持排序、筛选、分页

#### 2.2 GPU操作功能
- **心跳操作**: 手动触发GPU心跳
- **故障标记**: 标记GPU为故障状态
- **恢复操作**: 恢复故障GPU
- **批量操作**: 支持批量选择和执行操作
- **设计要求**: 操作确认对话框，操作结果反馈

#### 2.3 GPU统计信息
- **状态统计**: 活跃、离线、故障GPU数量统计
- **负载统计**: 平均负载、任务分布等
- **性能指标**: GPU利用率、内存使用率等
- **设计要求**: 图表展示，支持时间范围选择

#### 2.4 按任务类型查询GPU
- **任务类型选择**: 下拉选择任务类型
- **优先级筛选**: 支持按优先级筛选
- **结果展示**: 显示支持指定任务类型的GPU列表
- **设计要求**: 实时查询，结果高亮显示

### 3. 任务监控模块

#### 3.1 任务状态统计
- **状态分布**: 排队、处理中、已完成、失败、超时任务数量
- **趋势分析**: 任务状态变化趋势
- **性能指标**: 平均处理时间、成功率等
- **设计要求**: 卡片式展示，支持时间范围选择

#### 3.2 任务列表
- **列表展示**: 表格形式展示任务列表
- **状态筛选**: 按任务状态筛选
- **类型筛选**: 按任务类型筛选
- **GPU筛选**: 按GPU ID筛选
- **设计要求**: 支持排序、分页、搜索

#### 3.3 任务详情
- **基本信息**: 任务ID、类型、状态、创建时间等
- **执行信息**: GPU ID、开始时间、处理时间等
- **载荷信息**: 任务输入参数和输出结果
- **错误信息**: 失败任务的错误详情
- **设计要求**: 模态框展示，支持JSON格式化显示

#### 3.4 任务进度跟踪
- **实时进度**: 显示任务执行进度百分比
- **预估时间**: 显示预估剩余时间
- **队列位置**: 显示任务在队列中的位置
- **设计要求**: 进度条展示，实时更新

### 4. 系统健康检查

#### 4.1 整体健康状态
- **健康指标**: 整体系统健康状态
- **组件状态**: 各组件健康状态
- **检查时间**: 最后健康检查时间
- **设计要求**: 状态指示器，颜色编码

#### 4.2 组件健康详情
- **GPU健康**: GPU节点健康状态
- **队列健康**: 任务队列健康状态
- **集群健康**: 集群状态信息
- **设计要求**: 树形结构展示，支持展开/收起

#### 4.3 健康指标图表
- **历史趋势**: 健康指标历史变化
- **异常检测**: 异常指标高亮显示
- **预警提示**: 健康指标异常预警
- **设计要求**: 时间序列图表，支持交互

### 5. 告警管理模块

#### 5.1 告警列表
- **告警展示**: 列表形式展示所有告警
- **级别筛选**: 按告警级别筛选
- **状态筛选**: 按告警状态筛选
- **时间筛选**: 按时间范围筛选
- **设计要求**: 支持排序、分页、搜索

#### 5.2 告警统计
- **数量统计**: 各级别告警数量统计
- **趋势分析**: 告警数量变化趋势
- **处理统计**: 告警处理情况统计
- **设计要求**: 图表展示，支持时间范围选择

#### 5.3 告警操作
- **确认告警**: 确认告警信息
- **忽略告警**: 忽略告警信息
- **批量操作**: 批量处理告警
- **设计要求**: 操作确认，结果反馈

### 6. 系统设置模块

#### 6.1 API配置
- **服务器地址**: 调度系统API地址配置
- **API密钥**: API认证密钥配置
- **连接测试**: 测试API连接状态
- **设计要求**: 表单验证，配置保存

#### 6.2 显示设置
- **刷新间隔**: 数据自动刷新间隔设置
- **主题设置**: 深色/浅色主题切换
- **语言设置**: 界面语言选择
- **设计要求**: 实时预览，设置持久化

#### 6.3 系统信息
- **版本信息**: 系统版本、构建时间等
- **运行状态**: 系统运行时间、实例信息等
- **集群信息**: 集群状态、节点信息等
- **设计要求**: 信息卡片展示，实时更新

## 技术实现要求

### 1. 数据管理
- **状态管理**: 使用Redux/Pinia等状态管理工具
- **数据缓存**: 实现数据缓存机制，减少API请求
- **实时更新**: 支持WebSocket或定时轮询更新数据
- **错误处理**: 完善的错误处理和用户提示

### 2. 用户体验
- **响应式设计**: 适配不同屏幕尺寸
- **加载状态**: 数据加载时显示加载动画
- **操作反馈**: 用户操作后提供明确的反馈
- **快捷键**: 支持常用操作的快捷键

### 3. 性能优化
- **懒加载**: 路由和组件懒加载
- **虚拟滚动**: 大列表使用虚拟滚动
- **防抖节流**: 搜索和输入防抖处理
- **缓存策略**: 合理的数据缓存策略

### 4. 安全考虑
- **认证处理**: 安全的API认证机制
- **权限控制**: 基于角色的权限控制
- **数据验证**: 前端数据验证和清理
- **XSS防护**: 防止跨站脚本攻击

## 开发规范

### 1. 代码规范
- **ESLint**: 使用ESLint进行代码检查
- **Prettier**: 使用Prettier进行代码格式化
- **TypeScript**: 使用TypeScript进行类型检查
- **Git规范**: 使用Conventional Commits规范

### 2. 测试要求
- **单元测试**: 核心功能单元测试
- **集成测试**: API集成测试
- **E2E测试**: 关键流程端到端测试
- **测试覆盖率**: 代码测试覆盖率不低于80%

### 3. 文档要求
- **API文档**: 详细的API接口文档
- **组件文档**: 组件使用说明文档
- **部署文档**: 部署和运维文档
- **用户手册**: 用户使用指南

## 部署要求

### 1. 构建配置
- **环境变量**: 支持多环境配置
- **构建优化**: 代码分割、压缩、缓存
- **静态资源**: CDN部署静态资源
- **版本管理**: 版本号管理和回滚

### 2. 部署方式
- **Docker**: 支持Docker容器化部署
- **Nginx**: 使用Nginx作为反向代理
- **HTTPS**: 支持HTTPS安全访问
- **负载均衡**: 支持负载均衡部署

### 3. 监控告警
- **性能监控**: 前端性能监控
- **错误监控**: 前端错误监控和上报
- **用户行为**: 用户行为分析
- **告警机制**: 异常情况告警

## 项目结构建议

```
src/
├── components/          # 通用组件
│   ├── common/         # 基础组件
│   ├── charts/         # 图表组件
│   └── forms/          # 表单组件
├── pages/              # 页面组件
│   ├── dashboard/      # 仪表板
│   ├── gpu/           # GPU管理
│   ├── tasks/         # 任务监控
│   ├── health/        # 健康检查
│   ├── alerts/        # 告警管理
│   └── settings/      # 系统设置
├── services/          # API服务
│   ├── api/           # API接口
│   ├── websocket/     # WebSocket服务
│   └── cache/         # 缓存服务
├── store/             # 状态管理
│   ├── slices/        # Redux slices
│   └── middleware/    # 中间件
├── utils/             # 工具函数
│   ├── helpers/       # 辅助函数
│   ├── constants/     # 常量定义
│   └── types/         # 类型定义
├── hooks/             # 自定义Hooks
├── styles/            # 样式文件
└── assets/            # 静态资源
```

## 开发时间估算

### 第一阶段（基础框架）- 1周
- 项目初始化和环境搭建
- 基础组件开发
- 路由和状态管理配置
- API服务封装

### 第二阶段（核心功能）- 2周
- 系统概览仪表板
- GPU管理模块
- 任务监控模块
- 基础图表集成

### 第三阶段（高级功能）- 1周
- 健康检查模块
- 告警管理模块
- 系统设置模块
- 实时数据更新

### 第四阶段（优化完善）- 1周
- 性能优化
- 测试完善
- 文档编写
- 部署配置

**总计**: 约5周开发时间

## 验收标准

### 功能验收
- [ ] 所有功能模块正常运行
- [ ] 数据展示准确无误
- [ ] 用户操作响应及时
- [ ] 错误处理完善

### 性能验收
- [ ] 页面加载时间 < 3秒
- [ ] 数据刷新延迟 < 1秒
- [ ] 内存使用合理
- [ ] 网络请求优化

### 兼容性验收
- [ ] 主流浏览器兼容
- [ ] 移动设备适配
- [ ] 不同分辨率适配
- [ ] 无障碍访问支持

### 安全验收
- [ ] 认证机制安全
- [ ] 数据传输加密
- [ ] 输入验证完善
- [ ] 权限控制正确
